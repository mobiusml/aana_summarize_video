type: service

name: aana-summarize-video

image: nvidia/cuda:12.1.0-cudnn8-devel-ubuntu22.04

commands:
  - apt-get update
  - apt-get install -y libgl1 libglib2.0-0 ffmpeg python3 python3-dev
  - curl -sSL https://install.python-poetry.org | python3 -
  - export PATH=$PATH:/root/.local/bin
  - poetry install
  - CUDA_VISIBLE_DEVICES="0" poetry run aana deploy aana_summarize_video.app:aana_app

port: 8000

# Comment to enable authorizartion
auth: False

# Use either spot or on-demand instances
spot_policy: auto

resources:
 gpu: 24GB
 cpu: 10